using UnityEngine;

public class InvulnerabilityOnHitModification : BaseModification
{
    public override string Name => "Invulnerability On Hit";
    public override string Description => "Grants 1 sec. of invulnerability after taking damage";
    public override Material Material => Resources.Load<Material>("Materials/InvulnerabilityOnHitMaterial");

    private float _lastHitTime = -1f; // Use -1 to indicate never hit

    public override float ModifyIncomingDamage(Player player, float damage)
    {
        if (Time.time - _lastHitTime < 1f)
        {
            // Find the specific sound source on the player, assuming it's there
            var denyDamageSound = player.denyDamageSound; // Assuming a public field for this
            if (denyDamageSound != null)
            {
                denyDamageSound.Play();
            }
            return 0; // Negate the damage
        }

        _lastHitTime = Time.time;
        return damage; // Apply damage normally
    }
}
